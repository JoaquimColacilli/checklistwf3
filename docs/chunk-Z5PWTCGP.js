import{X as B,_ as L,aa as G,ba as q,n as D,na as b,p as F,pa as H,qa as J,ra as K,sa as Q,ta as U,ua as X,va as Y,wa as Z,xa as $,ya as ee}from"./chunk-2XORILJT.js";import"./chunk-TC6LVV5X.js";import{Bb as V,Cb as z,Ia as a,Ja as N,Qb as W,_a as x,ab as v,cb as E,eb as i,ec as O,fb as o,fc as j,gb as k,ic as R,ja as I,jb as M,lb as d,mb as m,sa as u,ta as g,tb as n,ub as T,vb as f,wb as A,xb as y,yb as P,zb as S}from"./chunk-NOL2URQB.js";import{a as p,b as w,f as h}from"./chunk-XBB5NZD7.js";var ie=()=>[5,10,15,20];function te(s,l){if(s&1){let c=M();i(0,"div",17)(1,"div",18)(2,"div",19)(3,"h2",20),n(4," Nuevo Microservicio "),o(),i(5,"form",21),d("ngSubmit",function(){u(c);let e=m();return g(e.guardarMicroservicio())}),i(6,"div",22)(7,"label",23),n(8,"Nombre"),o(),i(9,"input",24),S("ngModelChange",function(e){u(c);let r=m();return P(r.nuevoMicroservicio.nombre,e)||(r.nuevoMicroservicio.nombre=e),g(e)}),o()(),i(10,"div",22)(11,"label",25),n(12,"Ambiente"),o(),i(13,"select",26),S("ngModelChange",function(e){u(c);let r=m();return P(r.nuevoMicroservicio.ambiente,e)||(r.nuevoMicroservicio.ambiente=e),g(e)}),i(14,"option",27),n(15,"WF3/Actas Digitales"),o(),i(16,"option",28),n(17,"CADI"),o()()(),i(18,"div",29)(19,"button",30),d("click",function(){u(c);let e=m();return g(e.cerrarModalNuevoMicroservicio())}),n(20," Cancelar "),o(),i(21,"button",31),n(22,"Guardar"),o()()()()()()}if(s&2){let c=m();a(9),y("ngModel",c.nuevoMicroservicio.nombre),a(4),y("ngModel",c.nuevoMicroservicio.ambiente)}}function re(s,l){if(s&1){let c=M();i(0,"div",17)(1,"div",32)(2,"h2",33),n(3," Confirmar eliminaci\xF3n "),o(),i(4,"p",34),n(5," \xBFEst\xE1 seguro de eliminar el microservicio "),i(6,"strong"),n(7),o(),n(8,"? "),o(),i(9,"div",35)(10,"button",2),d("click",function(){u(c);let e=m();return g(e.showConfirmDeleteModal=!1)}),n(11," Cancelar "),o(),i(12,"button",36),d("click",function(){u(c);let e=m();return g(e.eliminarMicroservicio())}),n(13," Eliminar "),o()()()()}if(s&2){let c=m();a(7),T(c.microservicioToDelete==null?null:c.microservicioToDelete.nombre)}}function oe(s,l){if(s&1){let c=M();i(0,"tr",37)(1,"td",38),n(2),o(),i(3,"td",38),n(4),o(),i(5,"td",38),n(6),o(),i(7,"td",38),n(8),o(),i(9,"td",38)(10,"button",39),d("click",function(){let e=u(c).index,r=m();return g(r.editarMicroservicio(e))}),k(11,"i",40),o(),i(12,"button",41),d("click",function(){let e=u(c).index,r=m();return g(r.confirmDeleteMicroservicio(e))}),k(13,"i",42),o()()()}if(s&2){let c=l.$implicit,t=l.index,e=m();a(2),f(" ",t+1+(e.currentPage-1)*e.itemsPerPage," "),a(2),f(" ",c.nombre," "),a(2),f(" ",c.ambiente," "),a(2),f(" ",c.fechaAlta," ")}}function ne(s,l){if(s&1&&(i(0,"option",43),n(1),o()),s&2){let c=l.$implicit;v("value",c),a(),f(" ",c," ")}}var ge=(()=>{let l=class l{constructor(t){this.cdr=t,this.modalNuevoMicroservicioAbierto=!1,this.showConfirmDeleteModal=!1,this.microservicios=[],this.pagedMicroservicios=[],this.nuevoMicroservicio={nombre:"",ambiente:"WF3/Actas Digitales",fechaAlta:""},this.microservicioSeleccionado=null,this.microservicioToDelete=null,this.itemsPerPage=5,this.currentPage=1,this.totalPages=1}ngOnInit(){return h(this,null,function*(){yield this.cargarMicroservicios()})}cargarMicroservicios(){return h(this,null,function*(){let t=D(b,"microservicios"),e=yield B(t);this.microservicios=e.docs.map(r=>p({id:r.id},r.data())),this.totalPages=Math.ceil(this.microservicios.length/this.itemsPerPage),this.actualizarPagina(),this.cdr.markForCheck()})}actualizarPagina(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;this.pagedMicroservicios=this.microservicios.slice(t,e)}cambiarItemsPorPagina(){this.totalPages=Math.ceil(this.microservicios.length/this.itemsPerPage),this.currentPage=1,this.actualizarPagina()}paginaAnterior(){this.currentPage>1&&(this.currentPage--,this.actualizarPagina())}paginaSiguiente(){this.currentPage<this.totalPages&&(this.currentPage++,this.actualizarPagina())}abrirNuevoMicroservicioModal(){this.modalNuevoMicroservicioAbierto=!0,this.microservicioSeleccionado=null,this.nuevoMicroservicio={nombre:"",ambiente:"WF3/Actas Digitales",fechaAlta:""}}cerrarModalNuevoMicroservicio(){this.modalNuevoMicroservicioAbierto=!1}guardarMicroservicio(){return h(this,null,function*(){this.microservicioSeleccionado?(this.nuevoMicroservicio.fechaAlta=new Date().toISOString().split("T")[0],yield this.actualizarMicroservicio()):(this.nuevoMicroservicio.fechaAlta=new Date().toISOString().split("T")[0],yield this.agregarNuevoMicroservicio()),this.cerrarModalNuevoMicroservicio()})}agregarNuevoMicroservicio(){return h(this,null,function*(){try{let t=D(b,"microservicios"),e=yield q(t,this.nuevoMicroservicio);this.microservicios.push(w(p({},this.nuevoMicroservicio),{id:e.id})),this.totalPages=Math.ceil(this.microservicios.length/this.itemsPerPage),this.actualizarPagina(),this.cdr.markForCheck()}catch(t){console.error("Error guardando el nuevo microservicio en Firestore:",t)}})}actualizarMicroservicio(){return h(this,null,function*(){if(this.microservicioSeleccionado)try{let t=F(b,"microservicios",this.microservicioSeleccionado.id);yield L(t,p({},this.nuevoMicroservicio));let e=this.microservicios.findIndex(r=>r.id===this.microservicioSeleccionado.id);e>-1&&(this.microservicios[e]=w(p({},this.nuevoMicroservicio),{id:this.microservicioSeleccionado.id})),this.actualizarPagina(),this.cdr.markForCheck()}catch(t){console.error("Error actualizando el microservicio en Firestore:",t)}})}editarMicroservicio(t){let e=(this.currentPage-1)*this.itemsPerPage;this.microservicioSeleccionado=this.microservicios[e+t],this.nuevoMicroservicio=p({},this.microservicioSeleccionado),this.modalNuevoMicroservicioAbierto=!0}confirmDeleteMicroservicio(t){let e=(this.currentPage-1)*this.itemsPerPage;this.microservicioToDelete=this.microservicios[e+t],this.showConfirmDeleteModal=!0}eliminarMicroservicio(){return h(this,null,function*(){if(this.microservicioToDelete)try{let t=this.microservicioToDelete.id,e=F(b,"microservicios",t);yield G(e),this.microservicios=this.microservicios.filter(r=>r.id!==t),this.totalPages=Math.ceil(this.microservicios.length/this.itemsPerPage),this.actualizarPagina(),this.showConfirmDeleteModal=!1,this.cdr.markForCheck()}catch(t){console.error("Error eliminando el microservicio en Firestore:",t)}})}};l.\u0275fac=function(e){return new(e||l)(N(W))},l.\u0275cmp=I({type:l,selectors:[["app-microservicios"]],standalone:!0,features:[V],decls:36,vars:14,consts:[[1,"font-bold","text-lg","lg:text-3xl","mb-4"],[1,"flex","justify-end","mb-4"],[1,"btn-primary","mr-2",3,"click"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",4,"ngIf"],[1,"overflow-x-auto","mt-4"],[1,"w-full","table-auto","bg-gray-800","rounded-lg","overflow-hidden"],[1,"bg-gray-700","text-white"],[1,"px-4","py-2"],["class","hover:bg-gray-700 transition-colors",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","mt-4","px-4","py-2","bg-gray-900","rounded-md"],[1,"flex","items-center"],["for","itemsPerPage",1,"text-gray-300","mr-2"],["id","itemsPerPage",1,"rounded-md","text-gray-900","bg-gray-200","border","border-gray-400","focus:outline-none","focus:ring-2","focus:ring-indigo-600",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-2"],[1,"btn-secondary",3,"click","disabled"],[1,"text-gray-300"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50","z-50"],[1,"bg-gray-900","rounded-lg","w-1/4","max-h-[80%]","max-w-[80%]","overflow-auto","px-3","py-2","scrollbar-thin","scrollbar-thumb-gray-700","scrollbar-track-gray-900","scrollbar-thumb-rounded-full","scrollbar-track-rounded-full"],[1,"modal-content"],[1,"text-2xl","font-bold","text-center","text-white","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","nombre",1,"block","text-gray-300","mb-1"],["id","nombre","name","nombre",1,"w-full","rounded-md","text-gray-900","bg-gray-200","border","border-gray-400","focus:outline-none","focus:ring-2","focus:ring-indigo-600",3,"ngModelChange","ngModel"],["for","ambiente",1,"block","text-gray-300","mb-1"],["id","ambiente","name","ambiente",1,"w-full","rounded-md","text-gray-900","bg-gray-200","border","border-gray-400","focus:outline-none","focus:ring-2","focus:ring-indigo-600",3,"ngModelChange","ngModel"],["value","WF3"],["value","CADI"],[1,"flex","justify-end","mt-4"],["type","button",1,"btn-primary","mr-1",3,"click"],["type","submit",1,"btn-primary"],[1,"bg-gray-900","rounded-lg","p-4","max-w-sm"],[1,"text-lg","font-bold","text-center","text-white","mb-3"],[1,"text-gray-300","mb-4","text-center","justify-center"],[1,"flex","justify-end"],[1,"btn-primary",3,"click"],[1,"hover:bg-gray-700","transition-colors"],[1,"px-4","py-2","border-b","border-gray-700","text-center"],[1,"btn-secondary","transition-transform","duration-300","ease-in-out","hover:scale-105","mr-2",3,"click"],[1,"fas","fa-edit"],[1,"btn-secondary","transition-transform","duration-300","ease-in-out","hover:scale-105",3,"click"],[1,"fas","fa-trash"],[3,"value"]],template:function(e,r){e&1&&(i(0,"h1",0),n(1,"Microservicios"),o(),i(2,"div",1)(3,"button",2),d("click",function(){return r.abrirNuevoMicroservicioModal()}),n(4," Nuevo Microservicio "),o()(),x(5,te,23,2,"div",3)(6,re,14,1,"div",3),i(7,"div",4)(8,"table",5)(9,"thead")(10,"tr",6)(11,"th",7),n(12,"ID"),o(),i(13,"th",7),n(14,"Nombre"),o(),i(15,"th",7),n(16,"Ambiente"),o(),i(17,"th",7),n(18,"Fecha de Alta"),o(),i(19,"th",7),n(20,"Acciones"),o()()(),i(21,"tbody"),x(22,oe,14,4,"tr",8),o()()(),i(23,"div",9)(24,"div",10)(25,"label",11),n(26,"Items por p\xE1gina:"),o(),i(27,"select",12),S("ngModelChange",function(C){return P(r.itemsPerPage,C)||(r.itemsPerPage=C),C}),d("change",function(){return r.cambiarItemsPorPagina()}),x(28,ne,2,2,"option",13),o()(),i(29,"div",14)(30,"button",15),d("click",function(){return r.paginaAnterior()}),n(31," Anterior "),o(),i(32,"span",16),n(33),o(),i(34,"button",15),d("click",function(){return r.paginaSiguiente()}),n(35," Siguiente "),o()()()),e&2&&(a(5),v("ngIf",r.modalNuevoMicroservicioAbierto),a(),v("ngIf",r.showConfirmDeleteModal),a(16),v("ngForOf",r.pagedMicroservicios),a(5),y("ngModel",r.itemsPerPage),a(),v("ngForOf",z(13,ie)),a(2),E("opacity-50",r.currentPage===1),v("disabled",r.currentPage===1),a(3),A("P\xE1gina ",r.currentPage," de ",r.totalPages,""),a(),E("opacity-50",r.currentPage===r.totalPages),v("disabled",r.currentPage===r.totalPages))},dependencies:[R,O,j,ee,X,Z,$,H,Y,J,K,U,Q],encapsulation:2,changeDetection:0});let s=l;return s})();export{ge as default};
